<Window x:Class="Pos.Client.Wpf.Windows.Accounting.AccountLedgerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:Pos.Client.Wpf.Converters"
        Title="Account Ledger" Height="600" Width="980"
        WindowStartupLocation="CenterOwner">
    <Window.Resources>
        <conv:UtcToDisplayTimeConverter x:Key="UtcTimeConv"/>
    </Window.Resources>
    <DockPanel Margin="10">
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="0,0,0,8" VerticalAlignment="Center">
            <TextBlock Text="Account:" VerticalAlignment="Center"/>
            <ComboBox Width="380" Margin="6,0,0,0"
                ItemsSource="{Binding Accounts}"
                SelectedItem="{Binding SelectedAccount}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Code}" FontWeight="Bold"/>
                            <TextBlock Text=" — " />
                            <TextBlock Text="{Binding Name}"/>
                        </StackPanel>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>

            <TextBlock Text=" From:" Margin="12,0,6,0" VerticalAlignment="Center"/>
            <DatePicker SelectedDate="{Binding FromDate}"/>
            <TextBlock Text=" To:" Margin="12,0,6,0" VerticalAlignment="Center"/>
            <DatePicker SelectedDate="{Binding ToDate}"/>

            <Button Content="Refresh" Margin="12,0,0,0" Command="{Binding RefreshCmd}"/>
        </StackPanel>

        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="0,0,0,8">
            <TextBlock Text="Opening:" FontWeight="Bold"/>
            <TextBlock Text="{Binding Opening, StringFormat= 0.##}" Margin="6,0,24,0"/>
            <TextBlock Text="Closing:" FontWeight="Bold"/>
            <TextBlock Text="{Binding Closing, StringFormat= 0.##}" Margin="6,0,0,0"/>
        </StackPanel>

        <DataGrid ItemsSource="{Binding Rows}" AutoGenerateColumns="False" CanUserAddRows="False" Style="{StaticResource ModernDataGrid}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Date/Time"
                    Binding="{Binding TsUtc, Converter={StaticResource UtcTimeConv}, ConverterParameter=yyyy-MM-dd HH:mm}" Width="*"/>
                <DataGridTextColumn Header="Memo" Binding="{Binding Memo}" Width="2*"/>
                <DataGridTextColumn Header="Debit" Binding="{Binding Debit, StringFormat=0.##}" Width="*" />
                <DataGridTextColumn Header="Credit" Binding="{Binding Credit, StringFormat=0.##}" Width="*" />
                <DataGridTextColumn Header="Running" Binding="{Binding Running, StringFormat=0.##}" Width="*" />
            </DataGrid.Columns>
        </DataGrid>
    </DockPanel>
</Window>
