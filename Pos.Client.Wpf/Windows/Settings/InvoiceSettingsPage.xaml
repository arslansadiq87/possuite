<UserControl x:Class="Pos.Client.Wpf.Windows.Settings.InvoiceSettingsPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Width="800"
             MaxWidth="1000">

    <!-- Mirror IdentitySettingsPage: inline layout, margins, borders, no external style keys -->
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <!-- scope row -->
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,12">
            <TextBlock Text="Invoice Settings"
                       FontSize="20"
                       FontWeight="Bold"
                       Margin="0,0,0,2"/>
            <TextBlock Text="Local to this counter — choose printer, printing behavior, and footers for all receipt types."
                       Opacity="0.8"/>
        </StackPanel>

        <!-- Scope banner (same idea as Identity page’s scope strip) -->
        <Border Grid.Row="1"
                CornerRadius="4"
                Padding="8,6"
                Margin="0,0,0,12"
                Background="#0F000000"
                BorderBrush="#22000000"
                BorderThickness="1">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="Scope:"
                           VerticalAlignment="Center"
                           FontWeight="SemiBold"/>
                <TextBlock Text="  This counter only (local settings, no sync)"
                           Margin="6,0,0,0"
                           VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Body -->
        <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
            <StackPanel Orientation="Vertical" >

                <!-- Backups card -->
                <Border CornerRadius="6"
        Padding="12"
        Margin="0,0,0,12"
        Background="#08000000"
        BorderBrush="#22000000"
        BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="Backups"
               FontWeight="SemiBold"
               Margin="0,0,0,8"/>
                        <StackPanel>
                            <CheckBox Content="Enable daily backup"
                IsChecked="{Binding EnableDailyBackup, Mode=TwoWay}"/>
                            <CheckBox Content="Enable hourly backup"
                IsChecked="{Binding EnableHourlyBackup, Mode=TwoWay}"
                Margin="0,4,0,0"/>
                        </StackPanel>
                        <TextBlock Text="(These switches only enable the behavior; scheduling/runner logic uses these flags.)"
               Opacity="0.7"
               Margin="0,8,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Printer card -->
                <Border CornerRadius="6"
                        Padding="12"
                        Margin="0,0,0,12"
                        Background="#08000000"
                        BorderBrush="#22000000"
                        BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="Printer"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,8"/>
                        <StackPanel>
                            <TextBlock Text="Select printer"/>
                            <ComboBox ItemsSource="{Binding Printers}"
                                      SelectedItem="{Binding PrinterName, Mode=TwoWay}"
                                      MinWidth="320"
                                      Margin="0,4,0,0"/>
                            <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                <Button Content="Use Windows default"
                                        Command="{Binding UseWindowsDefaultPrinterCommand}"
                                        Padding="12,6"/>
                                <CheckBox Content="Enable cash drawer kick (future)"
                                          IsChecked="{Binding CashDrawerKickEnabled, Mode=TwoWay}"
                                          Margin="12,0,0,0"
                                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Print behavior card -->
                <Border CornerRadius="6"
                        Padding="12"
                        Margin="0,0,0,12"
                        Background="#08000000"
                        BorderBrush="#22000000"
                        BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="Print Behavior"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,8"/>
                        <StackPanel>
                            <CheckBox Content="Auto print sale invoice on Save"
                                      IsChecked="{Binding AutoPrintOnSave, Mode=TwoWay}" />
                            <CheckBox Content="Ask before printing invoice"
                                      IsChecked="{Binding AskBeforePrint, Mode=TwoWay}"
                                      Margin="0,4,0,0" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- (… header & existing cards remain unchanged) -->

                <!-- Label printing card -->
                <Border CornerRadius="6" Padding="12" Margin="0,0,0,12" Background="#08000000" BorderBrush="#22000000" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="Label Printing" FontWeight="SemiBold" Margin="0,0,0,8"/>
                        <StackPanel>
                            <TextBlock Text="Select label printer"/>
                            <ComboBox ItemsSource="{Binding LabelPrinters}"
                SelectedItem="{Binding LabelPrinterName, Mode=TwoWay}"
                MinWidth="320" Margin="0,4,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Display timezone card -->
                <Border CornerRadius="6" Padding="12" Margin="0,0,0,12" Background="#08000000" BorderBrush="#22000000" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="Display Timezone" FontWeight="SemiBold" Margin="0,0,0,8"/>
                        <StackPanel>
                            <TextBlock Text="Timezone for on-screen timestamps"/>
                            <ComboBox ItemsSource="{Binding TimeZones}"
                SelectedItem="{Binding DisplayTimeZoneId, Mode=TwoWay}"
                MinWidth="360" Margin="0,4,0,0" IsEditable="True"/>
                            <TextBlock Text="(Used for UI display; storage remains UTC.)" Opacity="0.7" Margin="0,6,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Till payments & item defaults (merged from Preferences) -->
                <Border CornerRadius="6" Padding="12" Margin="0,0,0,12" Background="#08000000" BorderBrush="#22000000" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="Till Payments &amp; Item Defaults" FontWeight="SemiBold" Margin="0,0,0,8"/>

                        <Grid Margin="0,4,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Sales card clearing -->
                            <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,8,8">
                                <TextBlock Text="Sales card clearing account"/>
                                <!-- Sales card clearing (bank account) -->
                                <ComboBox ItemsSource="{Binding BankAccounts}"
          DisplayMemberPath="Display"
          SelectedValuePath="AccountId"
          SelectedValue="{Binding SalesCardClearingAccountId, Mode=TwoWay}"
          MinWidth="300" Margin="0,4,0,0"/>
                            </StackPanel>

                            <!-- Purchase bank account -->
                            <StackPanel Grid.Row="0" Grid.Column="1" Margin="8,0,0,8">
                                <TextBlock Text="Purchase bank account"/>
                                <ComboBox ItemsSource="{Binding BankAccounts}"
          DisplayMemberPath="Display"
          SelectedValuePath="AccountId"
          SelectedValue="{Binding PurchaseBankAccountId, Mode=TwoWay}"
          MinWidth="300" Margin="0,4,0,0"/>
                            </StackPanel>

                            <!-- Default barcode type -->
                            <!-- Default barcode type -->
                            <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,8,0">
                                <TextBlock Text="Default item barcode type"/>
                                <ComboBox ItemsSource="{Binding BarcodeTypeValues}"
          SelectedItem="{Binding DefaultBarcodeType, Mode=TwoWay}"
          MinWidth="200" Margin="0,4,0,0"/>

                            </StackPanel>

                            <!-- Inside the Till Payments & Item Defaults card -->
                            <StackPanel Grid.Row="1" Grid.Column="1" Margin="8,0,0,0">
                                <TextBlock Text="Till behavior"/>
                                <CheckBox Content="Use till method (shift-based payments)"
            IsChecked="{Binding UseTillMethod, Mode=TwoWay}"
            Margin="0,4,0,0"/>
                            </StackPanel>


                        </Grid>
                    </StackPanel>
                </Border>


                <!-- Footers card -->
                <Border CornerRadius="6"
                        Padding="12"
                        Margin="0,0,0,12"
                        Background="#08000000"
                        BorderBrush="#22000000"
                        BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="Footers"
                                   FontWeight="SemiBold"
                                   Margin="0,0,0,8"/>

                        <Grid Margin="0,4,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Sale -->
                            <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,8,8">
                                <TextBlock Text="Sale invoice footer"/>
                                <TextBox Text="{Binding FooterSale, Mode=TwoWay}"
                                         AcceptsReturn="True"
                                         TextWrapping="Wrap"
                                         Height="80"
                                         Margin="0,4,0,0"/>
                            </StackPanel>

                            <!-- Sale Return -->
                            <StackPanel Grid.Row="0" Grid.Column="1" Margin="8,0,0,8">
                                <TextBlock Text="Sale return footer"/>
                                <TextBox Text="{Binding FooterSaleReturn, Mode=TwoWay}"
                                         AcceptsReturn="True"
                                         TextWrapping="Wrap"
                                         Height="80"
                                         Margin="0,4,0,0"/>
                            </StackPanel>

                            <!-- Voucher -->
                            <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,8,0">
                                <TextBlock Text="Voucher receipt footer"/>
                                <TextBox Text="{Binding FooterVoucher, Mode=TwoWay}"
                                         AcceptsReturn="True"
                                         TextWrapping="Wrap"
                                         Height="80"
                                         Margin="0,4,0,0"/>
                            </StackPanel>

                            <!-- Z Report -->
                            <StackPanel Grid.Row="1" Grid.Column="1" Margin="8,0,0,0">
                                <TextBlock Text="Z-report footer"/>
                                <TextBox Text="{Binding FooterZReport, Mode=TwoWay}"
                                         AcceptsReturn="True"
                                         TextWrapping="Wrap"
                                         Height="80"
                                         Margin="0,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Save row -->
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Right"
                            Margin="0,4,0,0">
                    <Button Content="Save"
                            Command="{Binding SaveCommand}"
                            Padding="16,8"/>
                </StackPanel>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
