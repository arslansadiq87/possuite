<UserControl x:Class="Pos.Client.Wpf.Windows.Settings.InvoiceSettingsPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:conv="clr-namespace:Pos.Client.Wpf.Converters"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             Width="1000" MaxWidth="1200">
    <UserControl.Resources>
        <conv:NegateBooleanConverter x:Key="NegateBool"/>
    </UserControl.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Header -->
            <RowDefinition Height="Auto"/>
            <!-- Scope -->
            <RowDefinition Height="*"/>
            <!-- Main -->
            <RowDefinition Height="Auto"/>
            <!-- Actions -->
        </Grid.RowDefinitions>

        <!-- HEADER -->
        <DockPanel Grid.Row="0" LastChildFill="False" Margin="0,0,0,16">
            <StackPanel Orientation="Vertical" DockPanel.Dock="Left">
                <TextBlock Text="Invoice Settings" FontSize="18" FontWeight="SemiBold"/>
                <TextBlock Text="Printer is per counter. Everything else is global or per outlet."
                           FontSize="12"
                           Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                           Margin="0,2,0,0"/>
            </StackPanel>
        </DockPanel>

        <!-- SCOPE -->
        <Border Grid.Row="1"
                CornerRadius="4" Padding="0,6" Margin="0,0,0,16"
                Background="#0F000000" BorderBrush="#22000000" BorderThickness="1">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="Scope:" Margin="8,0,16,0" VerticalAlignment="Center" FontWeight="SemiBold"/>

                <RadioButton Content="Global"
                             Margin="0,0,8,0"
                             IsChecked="{Binding IsGlobal}" GroupName="Scope"
                             VerticalAlignment="Center" IsEnabled="{Binding CanEditGlobal}"/>

                <RadioButton Content="Specific outlet"
                             Margin="0,0,8,0"
                             IsChecked="{Binding IsGlobal, Converter={StaticResource NegateBool}}" GroupName="Scope"
                             VerticalAlignment="Center" IsEnabled="{Binding CanEditGlobal}"/>

                <ComboBox Width="220" Height="26"
                          ItemsSource="{Binding OutletsList}"
                          SelectedItem="{Binding SelectedOutlet}"
                          DisplayMemberPath="Name"
                          Margin="8,0,0,0"
                          VerticalContentAlignment="Center"
                          IsEnabled="{Binding CanEditGlobal}"/>
            </StackPanel>
        </Border>

        <!-- MAIN -->
        <Grid Grid.Row="2" IsEnabled="{Binding CanEdit}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- LEFT: SCOPED -->
            <Border Grid.Column="0"
                    Background="#06000000" BorderBrush="#22000000" BorderThickness="1"
                    CornerRadius="4" Padding="14" Margin="0,0,12,0">
                <StackPanel>

                    <!-- Print behavior -->
                    <TextBlock Text="Print behavior" FontWeight="SemiBold" Margin="0,0,0,8"/>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <CheckBox Content="Kick cash drawer" IsChecked="{Binding CashDrawerKickEnabled}" Margin="0,0,16,0"/>
                        <CheckBox Content="Auto print on save" IsChecked="{Binding AutoPrintOnSave}" Margin="0,0,16,0"/>
                        <CheckBox Content="Ask before print" IsChecked="{Binding AskBeforePrint}"/>
                    </StackPanel>

                    <!-- Timezone -->
                    <TextBlock Text="Display time zone" FontWeight="SemiBold" Margin="0,8,0,6"/>
                    <ComboBox Width="280" Height="26" ItemsSource="{Binding TimeZones}"
                              SelectedItem="{Binding DisplayTimeZoneId}"
                              VerticalContentAlignment="Center"/>

                    <Separator Margin="0,10,0,10"/>

                    <!-- Accounts -->
                    <TextBlock Text="Accounts" FontWeight="SemiBold" Margin="0,0,0,8"/>
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="220"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Sales card clearing" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <ComboBox Grid.Column="1" Height="26"
                                  ItemsSource="{Binding BankAccounts}"
                                  SelectedValuePath="AccountId"
                                  SelectedValue="{Binding SalesCardClearingAccountId}"
                                  DisplayMemberPath="Display"
                                  VerticalContentAlignment="Center"/>
                    </Grid>
                    <Grid Margin="0,0,0,12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="220"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Default purchase bank" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <ComboBox Grid.Column="1" Height="26"
                                  ItemsSource="{Binding BankAccounts}"
                                  SelectedValuePath="AccountId"
                                  SelectedValue="{Binding PurchaseBankAccountId}"
                                  DisplayMemberPath="Display"
                                  VerticalContentAlignment="Center"/>
                    </Grid>

                    <Separator Margin="0,10,0,10"/>

                    <!-- Defaults -->
                    <TextBlock Text="Item defaults" FontWeight="SemiBold" Margin="0,0,0,8"/>
                    <Grid Margin="0,0,0,12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="220"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Default barcode type" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <ComboBox Grid.Column="1" Height="26"
                                  ItemsSource="{Binding BarcodeTypeValues}"
                                  SelectedItem="{Binding DefaultBarcodeType}"
                                  VerticalContentAlignment="Center"/>
                    </Grid>

                    <!-- Footers -->
                    <TextBlock Text="Footers" FontWeight="SemiBold" Margin="0,0,0,8"/>
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="220"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Sale" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBox Grid.Column="1" Height="60" AcceptsReturn="True" Text="{Binding FooterSale}"/>
                    </Grid>
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="220"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Sale return" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBox Grid.Column="1" Height="60" AcceptsReturn="True" Text="{Binding FooterSaleReturn}"/>
                    </Grid>
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="220"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Voucher" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBox Grid.Column="1" Height="60" AcceptsReturn="True" Text="{Binding FooterVoucher}"/>
                    </Grid>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="220"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Z-Report" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBox Grid.Column="1" Height="60" AcceptsReturn="True" Text="{Binding FooterZReport}"/>
                    </Grid>

                    <Separator Margin="0,10,0,10"/>

                    <!-- Backups / Till -->
                    <TextBlock Text="Backups &amp; tills" FontWeight="SemiBold" Margin="0,0,0,8"/>
                    <StackPanel Orientation="Horizontal">
                        <CheckBox Content="Enable daily backup"  IsChecked="{Binding EnableDailyBackup}"  Margin="0,0,16,0"/>
                        <CheckBox Content="Enable hourly backup" IsChecked="{Binding EnableHourlyBackup}" Margin="0,0,16,0"/>
                        <CheckBox Content="Require open till"    IsChecked="{Binding UseTill}"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- RIGHT: LOCAL PRINTERS -->
            <Border Grid.Column="1"
                    Background="#06000000" BorderBrush="#22000000" BorderThickness="1"
                    CornerRadius="4" Padding="14">
                <StackPanel>
                    <TextBlock Text="Local printers (this counter)"
                               FontWeight="SemiBold"
                               Margin="0,0,0,8"/>

                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="140"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="Invoice printer" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <ComboBox Grid.Column="1" Height="26"
                                  ItemsSource="{Binding Printers}"
                                  SelectedItem="{Binding PrinterName}"
                                  VerticalContentAlignment="Center"/>
                        <Button Grid.Column="2" Content="Use Windows default" Height="26" Margin="8,0,0,0"
                                Command="{Binding UseWindowsDefaultPrinterCommand}"/>
                    </Grid>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="140"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Label printer" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <ComboBox Grid.Column="1" Height="26"
                                  ItemsSource="{Binding LabelPrinters}"
                                  SelectedItem="{Binding LabelPrinterName}"
                                  VerticalContentAlignment="Center"/>
                    </Grid>

                    <TextBlock Text="These settings are saved for this counter only."
                               FontSize="11"
                               Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                               Margin="0,8,0,0"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- ACTIONS -->
        <DockPanel Grid.Row="3" Margin="0,16,0,0">
            <TextBlock DockPanel.Dock="Left"
                       VerticalAlignment="Center"
                       FontSize="11"
                       Foreground="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
                       Text="Scope applies to all counters in an outlet. Printers here affect only this counter."/>
            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                <Button Content="Save" Height="26" MinWidth="90"
                        Command="{Binding SaveCommand}"/>
            </StackPanel>
        </DockPanel>
    </Grid>
</UserControl>
