<Window x:Class="Pos.Client.Wpf.Windows.Till.PinDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:infra="clr-namespace:Pos.Client.Wpf.Infrastructure"
        Title="Enter PIN"
        Height="380" Width="300"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        WindowStyle="ToolWindow"
        ShowInTaskbar="False"
        FontSize="16">

    <Grid Margin="16" >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Title -->
            <RowDefinition Height="Auto"/>
            <!-- Pin box -->
            <RowDefinition Height="12"/>
            <!-- Spacer -->
            <RowDefinition Height="*"/>
            <!-- Keypad -->
            <RowDefinition Height="Auto"/>
            <!-- Actions -->
        </Grid.RowDefinitions>

        <TextBlock Text="Please enter your PIN"
                   FontWeight="SemiBold"
                   Grid.Row="0" Margin="0,0,0,8"/>

        <!-- Masked input (we fill via code) -->
        <PasswordBox x:Name="PinBox"
                     Grid.Row="1"
                     FontSize="22"
                     Width="220"
                     HorizontalAlignment="Center"
                     PasswordChar="●"
                     PreviewTextInput="PinBox_PreviewTextInput"
                     PreviewKeyDown="PinBox_PreviewKeyDown"
                     IsEnabled="False" />
        <!-- read-only via keypad -->

        <UniformGrid Grid.Row="3" Rows="4" Columns="3" Margin="0,8,0,8">
            <!-- Row 1 -->
            <Button Content="1" Click="Digit_Click" Margin="4" MinHeight="48" />
            <Button Content="2" Click="Digit_Click" Margin="4" MinHeight="48" />
            <Button Content="3" Click="Digit_Click" Margin="4" MinHeight="48" />
            <!-- Row 2 -->
            <Button Content="4" Click="Digit_Click" Margin="4" MinHeight="48" />
            <Button Content="5" Click="Digit_Click" Margin="4" MinHeight="48" />
            <Button Content="6" Click="Digit_Click" Margin="4" MinHeight="48" />
            <!-- Row 3 -->
            <Button Content="7" Click="Digit_Click" Margin="4" MinHeight="48" />
            <Button Content="8" Click="Digit_Click" Margin="4" MinHeight="48" />
            <Button Content="9" Click="Digit_Click" Margin="4" MinHeight="48" />
            <!-- Row 4 -->
            <Button Content="⌫" Click="Backspace_Click" Margin="4" MinHeight="48" ToolTip="Backspace"/>
            <Button Content="0" Click="Digit_Click" Margin="4" MinHeight="48" />
            <Button Content="C" Click="Clear_Click" Margin="4" MinHeight="48" ToolTip="Clear"/>
        </UniformGrid>

        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="OK" Width="96" Margin="0,0,8,0" Click="Ok_Click" IsDefault="True"/>
            <Button Content="Cancel" Width="96" Command="{x:Static infra:AppCommands.CloseWindow}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"/>
        </StackPanel>
    </Grid>
</Window>
