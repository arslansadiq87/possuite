<Window x:Class="Pos.Client.Wpf.Windows.Purchases.PurchaseCenterWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Purchase Center — Edit • Receive • Returns"
        Height="680" Width="1000"
        WindowStartupLocation="CenterOwner">

    <Window.Resources>
        <!-- Routed commands -->
        
        
        <RoutedUICommand x:Key="CmdReceive" Text="Receive (F6)"/>
        <RoutedUICommand x:Key="CmdReturn"  Text="Return (F7)"/>
        <RoutedUICommand x:Key="CmdVoid"    Text="Void (Del)"/>
        
        
    </Window.Resources>

    <Window.InputBindings>
        
        <KeyBinding Key="F6"     Command="{StaticResource CmdReceive}"/>
        <KeyBinding Key="F7"     Command="{StaticResource CmdReturn}"/>
        <KeyBinding Key="Delete" Command="{StaticResource CmdVoid}"/>
        
        
    </Window.InputBindings>

    <Window.CommandBindings>
        
        
        <CommandBinding Command="{StaticResource CmdReceive}" Executed="CmdReceive_Executed" CanExecute="CmdReceive_CanExecute"/>
        <CommandBinding Command="{StaticResource CmdReturn}"  Executed="CmdReturn_Executed"  CanExecute="CmdReturn_CanExecute"/>
        <CommandBinding Command="{StaticResource CmdVoid}"    Executed="CmdVoid_Executed"    CanExecute="CmdVoid_CanExecute"/>
        
        
    </Window.CommandBindings>

    <DockPanel>
        <!-- Filters header -->
        <Border DockPanel.Dock="Top" Padding="8" Background="{DynamicResource {x:Static SystemColors.ControlLightBrushKey}}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Left filters -->
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Purchase #:" VerticalAlignment="Center" Margin="0,0,6,0"/>
                    <TextBox x:Name="PurchaseNoBox" Width="140" Margin="0,0,12,0"/>
                    <TextBlock Text="Supplier:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                    <TextBox x:Name="SupplierSearchBox" Width="200" Margin="0,0,12,0"/>
                    <TextBlock Text="Status:" VerticalAlignment="Center" Margin="0,0,4,0"/>
                    <ComboBox x:Name="StatusBox" Width="140" SelectedIndex="0">
                        <ComboBoxItem Content="Any"/>
                        <ComboBoxItem Content="Draft"/>
                        <ComboBoxItem Content="Received"/>
                        <ComboBoxItem Content="Return"/>
                        <ComboBoxItem Content="Voided"/>
                    </ComboBox>
                </StackPanel>

                <!-- From -->
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock Text="From:" VerticalAlignment="Center" Margin="0,0,6,0"/>
                    <DatePicker x:Name="FromDateBox" Width="140"/>
                </StackPanel>

                <!-- To -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <TextBlock Text="To:" VerticalAlignment="Center" Margin="0,0,6,0"/>
                    <DatePicker x:Name="ToDateBox" Width="140"/>
                </StackPanel>

                <!-- Actions -->
                <StackPanel Grid.Column="3" Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Search" Width="80" Click="SearchBtn_Click" Margin="0,0,6,0"/>
                    <Button Content="Clear"  Width="70" />
                </StackPanel>
            </Grid>
        </Border>

        <!-- Results grid (fills middle) -->
        <DataGrid x:Name="ResultsGrid" Height="500" DockPanel.Dock="Top"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  SelectionMode="Single"
                  SelectionUnit="FullRow"
                  Margin="8"
                  MouseDoubleClick="ResultsGrid_MouseDoubleClick">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Number" Binding="{Binding Number}" Width="70"/>
                <DataGridTextColumn Header="Date" Binding="{Binding Date, StringFormat={}{0:dd-MMM-yyyy}}" Width="120"/>
                <DataGridTextColumn Header="Supplier" Binding="{Binding Supplier}" Width="200"/>
                <DataGridTextColumn Header="Destination" Binding="{Binding Destination}" Width="160"/>
                <DataGridTextColumn Header="Vendor Inv #" Binding="{Binding VendorInvoiceNo}" Width="140"/>
                <DataGridTextColumn Header="Lines" Binding="{Binding Lines}" Width="70"/>
                <DataGridTextColumn Header="Subtotal" Binding="{Binding Subtotal, StringFormat=N2}" Width="110"/>
                <DataGridTextColumn Header="Discount" Binding="{Binding Discount, StringFormat=N2}" Width="110"/>
                <DataGridTextColumn Header="Tax" Binding="{Binding Tax, StringFormat=N2}" Width="100"/>
                <DataGridTextColumn Header="Other" Binding="{Binding OtherCharges, StringFormat=N2}" Width="100"/>
                <DataGridTextColumn Header="Grand" Binding="{Binding GrandTotal, StringFormat=N2}" Width="120"/>
                <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Bottom action bar -->
        <Border DockPanel.Dock="Bottom" Padding="8" Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- Left: quick info + totals -->
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="Selected:" FontWeight="Bold" Margin="0,0,8,0"/>
                    <TextBlock Text="{Binding SelectedSummary}" Margin="0,0,16,0"/>
                    <TextBlock Text="Count:" FontWeight="Bold" Margin="0,0,6,0"/>
                    <TextBlock x:Name="CountLabel" Margin="0,0,16,0"/>
                    <TextBlock Text="Total Qty:" FontWeight="Bold" Margin="0,0,6,0"/>
                    <TextBlock x:Name="TotalQtyLabel" Margin="0,0,16,0"/>
                    <TextBlock Text="Grand:" FontWeight="Bold" Margin="0,0,6,0"/>
                    <TextBlock x:Name="GrandTotalLabel"/>
                </StackPanel>

                <!-- Right: actions -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                    
                    <Button Content="Receive" MinWidth="90" Command="{StaticResource CmdReceive}" Margin="0,0,6,0"/>
                    <Button Content="Return"  MinWidth="90" Command="{StaticResource CmdReturn}"  Margin="0,0,6,0"/>
                    <Button Content="Void"    MinWidth="90" Command="{StaticResource CmdVoid}"    Margin="0,0,12,0"/>
                    
                    
                    
                </StackPanel>
            </Grid>
        </Border>
    </DockPanel>
</Window>
