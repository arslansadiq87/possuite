<Window x:Class="Pos.Client.Wpf.Windows.Admin.EditPartyWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Edit Party" Height="640" Width="820"
        WindowStartupLocation="CenterOwner"
        KeyDown="Window_KeyDown">
    <Grid Margin="14">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
            <TextBlock Text="Name" Width="70"/>
            <TextBox x:Name="NameText" Width="300" Margin="0,0,16,0"/>
            <CheckBox x:Name="ActiveCheck" Content="Active" IsChecked="True" Margin="0,0,10,0"/>
            <CheckBox x:Name="SharedCheck" Content="Shared across outlets" IsChecked="True" Checked="SharedChanged" Unchecked="SharedChanged"/>
        </StackPanel>

        <!-- Tabs -->
        <TabControl Grid.Row="1">
            <TabItem Header="Details">
                <StackPanel Margin="10" VerticalAlignment="Top">
                    <UniformGrid Columns="2" Rows="3" Margin="0,0,0,10">
                        <TextBlock Text="Phone"/>
                        <TextBox x:Name="PhoneText" Margin="0,0,10,6"/>
                        <TextBlock Text="Email"/>
                        <TextBox x:Name="EmailText" Margin="0,0,10,6"/>
                        <TextBlock Text="Tax Number"/>
                        <TextBox x:Name="TaxText" Margin="0,0,10,6"/>
                    </UniformGrid>

                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Roles:" Margin="0,0,10,0"/>
                        <CheckBox x:Name="RoleCustomerCheck" Content="Customer" Margin="0,0,16,0"/>
                        <CheckBox x:Name="RoleSupplierCheck" Content="Supplier"/>
                    </StackPanel>
                </StackPanel>
            </TabItem>

            <TabItem Header="Outlets - Credit">
                <DockPanel Margin="10">
                    <TextBlock DockPanel.Dock="Top" Text="Per-outlet visibility and credit policy" Margin="0,0,0,8"/>
                    <DataGrid x:Name="OutletsGrid" AutoGenerateColumns="False" CanUserAddRows="False" IsReadOnly="False">
                        <DataGrid.Columns>
                            <DataGridCheckBoxColumn Header="Active" Binding="{Binding IsActive}" Width="70"/>
                            <DataGridTextColumn Header="Outlet" Binding="{Binding OutletName}" IsReadOnly="True" Width="2*"/>
                            <DataGridCheckBoxColumn Header="Allow Credit" Binding="{Binding AllowCredit}" Width="110"/>
                            <DataGridTextColumn Header="Credit Limit" Binding="{Binding CreditLimit}" Width="120" />
                            <DataGridTextColumn Header="Balance" Binding="{Binding BalanceDisplay}" IsReadOnly="True" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </DockPanel>
            </TabItem>

            <TabItem Header="Balances (read-only)">
                <DataGrid x:Name="BalancesGrid" AutoGenerateColumns="False" IsReadOnly="True" Margin="10">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Outlet" Binding="{Binding OutletName}" Width="2*"/>
                        <DataGridTextColumn Header="Balance" Binding="{Binding Balance}" Width="*"/>
                        <DataGridTextColumn Header="As of (UTC)" Binding="{Binding AsOfUtc}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
        </TabControl>

        <!-- Footer -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <TextBlock x:Name="ErrorText" Foreground="IndianRed" Margin="0,0,16,0" VerticalAlignment="Center"/>
            <Button Content="Save (Ctrl+S)" Click="Save_Click" Margin="0,0,6,0"/>
            <Button Content="Cancel (Esc)" Click="Cancel_Click"/>
        </StackPanel>
    </Grid>
</Window>
